# 6. 로드 밸런싱 (Load Balancing)



### 1. 로드 밸런싱

* 여러 CPU나 저장장치 등 컴퓨터 자원에게 작업 나누는 것

* 배경/ 사용 이유

  * 많은 트래픽을 1대의 서버로 감당하기 어려워서

  * 해결

    * Scale-op

      →   하드웨어 성능 향상

      →   비쌈

    * Scale-out

      →   여러 서버가 나눠서 일하기

      →   무중단 서비스 제공하기 용이하므로 이게 효과적

* 방식

  * 클라이언트와 서버 사이에 로드 밸런서를 둠



### 2. 로드 밸런서의 서버 선택 방식

* 로드 밸런서는 부하가 일어나지 않게 여러 서버에 작업을 분산
  * 따라서 트래픽 많으면 서버 수 늘리고, 로드밸런서로 관리
* 방식
  * 라운드 로빈
    * CPU 스케줄링의 라운드 로빈 방식 활용
    * 요청이 들어오는 대로 서버마다 균등하게 분배(가장 단순)
  * Least Connctions
    * 연결 갯수가 가장 적은 서버 선택
    * 트래픽으로 세션 길어지는 경우 권장
  * Source
    * 사용자 IP를 해싱한 후, 그 겨로가에 따라 서버 선택
    * 특정 사용자가 항상 같은 서버로 연결되는 것 보장



### 3. 로드 밸런서 장애 대비

* 로드 밸런서를 이중화하여 대비한다
  * Active 상태와 Passive 상태
  * Active한 로드밸런서 동작하지 않으면 Passive 로드밸런서를 Active로 돌려서 운영