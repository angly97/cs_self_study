# 7. 브라우저



### 1. 브라우저

* 자원(html, pdf, image 등)을 서버에 요청하고, 데이터를 화면에 보여주는 소프트웨어

  * 자원 주소/구분/식별은 URI에 의해 정해짐

    →   URI(Uniform Resource Indentifier)

    ​	ㆍ  자원을 표현

    ​	ㆍ  URL + ?쿼리스트링

    ​	ㆍ  ex. http://endic.naver.com/endic.nhn?docid=1232950

    →   URL(Uniform Resource Locator)

    ​	ㆍ  자원의 위치를 표현

    ​	ㆍ  ex. http://endic.naver.com/endic.nhn 

*  구조

  ​	<img src="https://user-images.githubusercontent.com/70613905/166102019-4ed64323-499a-4003-a1f4-284f59eda283.JPG" alt="image-20220430193247888" style="width:80%;" />

  * 사용자 인터페이스

    * input, text 등의 UI요소가 있어서, 사용자가 프로그램을 조작하는 영역 
  * 브라우저 엔진

    * UI가 보내는 쿼리를 => 렌더링 엔진에 전달하는 담당
  * 렌더링 엔진
    * html, css같이 요청한 콘텐츠를 파싱해서 화면에 표시
  * 통신 (Networking)
  
    * HTTP 요청과 같은 네트워크 호출에 사용
  * UI백엔드
    * input, combo box같은 기본적인 위젯을 그림
  * 자바스크립트 해석기
  
    * 자바스크립트 코드를 해석 & 실행
  * 자료저장소
    * 쿠키 등 모든 종류의 자원을 하드디스크에 저장하는 계층



### 2. 렌더링 엔진의 동작 과정

* DOM(Document Object Model; 문서 객체 모델)
  * HTML 태그들을 Javascript가 이용할 수 있게 하는 객체
  * 브라우저가 html 페이지를 인식하는 방식

1. HTML 파싱하여 DOM 트리 구축

   * HTML문서는 문자열 텍스트이므로, 이를 브라우저가 이해할 수 있는 DOM로 바꿔서 메모리에 저장해야 함

     >파싱 (Parsing)
     >
     >문자열(Json 등)에서 원하는 데이터를 추출하여 브라우저가 이해할 수 있는 구조로 변환

   * HTML 파싱

     * 태그 간 관계 등 추출하여 파싱 트리로 변환 & 그 트리 내 태그를 모두 DOM노드로 변환

     1. HTML을 처음부터 순차적으로 파싱하며 DOM을 생성
     2. DOM생성해 나가다가, CSS로드하는 link/style태그 만나면 DOM 생성 잠시 중단
     3. CSS 파싱하여 CSSOM(CSS Object Model) 생성
     4. CSS파싱 끝나면, HTML 파싱을 중단점부터 시작하여 다시 DOM 생성

2. 렌더 트리 구축

   * DOM과 CSSOM을 결합하여 렌더 트리 구축

3. 렌더 트리 배치

   * 렌더 트리는 정해진 순서대로 화면에 표시됨

4. 렌더 트리 그리기

   * UI 백엔드에서 렌더 트리의 각 노드를 방문하며, 형상을 그림

* 렌더링을 빠르게 하기 위해, HTML파싱 끝까지 기다리지 않고, 배치와 그리기 과정 진행
  * 웹 페이지 접속 시, 한번에 뜨지 않고, 위에서부터 점점 화면이 나오는게 이 이유!



### 2. 브라우저 동작 과정 요약

1. 우리가 주소창에 특정 uri 입력하고 요청 자원을 받음
3. 브라우저의 렌더링 엔진은 
   1. 해당 자원이 담긴 html, css를 퍄싱하여 DOM & CSSOM 생성 => 얘네 결합하여 렌더트리 생성
   2. 렌더트리를 화면에 배치하고 => UI벡엔드가 노드를 돌며 형상을 그림
   3. 이 때, HTML 파싱 끝까지 기다리지 않고, 자원을 전송받으면 기다리는 동시에 일부분 그리기 시작

