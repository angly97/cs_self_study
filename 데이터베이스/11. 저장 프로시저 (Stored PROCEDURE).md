# 11. 저장 프로시저 (Stored PROCEDURE)



### 1. 저장 프로시저

* 하나의 함수로 실행되는 쿼리 집합

* 사용 이유

  * 같은 로직을 인자만 바꿔서 실행하기 싶을 때
  * 한 번의 요청으로 여러 쿼리 실행하고 싶을 때

* 장점

  * **한 번 컴파일 된 프로시저는 캐시에 저장되어 다시 컴파일하지 않고 사용 가능**
  * 분리되어 있으니까, 다른 코드 건드리지 않고 수정 가능
  * SQL문은 이미 서버에 저장되어 있기 때문에, 클라이언트는 인자만 전달해도 됨 => 서버-클라이언트 간 트래픽 감소
  * **프로시저에서 현재 참조 중인 테이블의 접근을 막아 => 보안에 좋음**

* 단점

  * 문법이 SQL과 오라클이 달라서 => 호환성 문제 있음
  * **문자/숫자 연산** 시, 프로그래밍 언어인 C, Java보다 속도 느림
  
* 프로시저 생성 & 호출 (문법 공부하기)

  ```sql
  -- 생성
  CREATE OR REPLACE PROCEDURE 프로시저명(매개변수명1 IN 자료형, 매개변수명2 IN VARCHAR2, 리턴변수명 OUT 자료형)
  IS
  [
      지역변수명1 자료형;
      지역변수명2 자료형 := '값 대입';
      ...
  ]
  BEGIN
  	필요한 기능
  END;
  
  
  -- 호출
  DECLARE name VARCHAR2(100)
  EXEC 프로시저명
  ```

  