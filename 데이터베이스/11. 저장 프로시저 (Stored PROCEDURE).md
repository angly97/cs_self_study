# 11. 저장 프로시저 (Stored PROCEDURE)



### 1. 저장 프로시저

* 하나의 함수로 실행하기 위한 쿼리 집합

* 사용 이유

  * 같은 로직의 쿼리를 인자만 바꿔서 실행하기 싶을 때
  * 한 번의 요청으로 여러 쿼리 실행하고 싶을 때

* 장점

  * 한번 컴파일된 프로시저는 재사용시 다시 컴파일되지 않고, 캐시에서 가져옴
  * 작업 변경 시, 분리되어 있으니까, 다른 코드 건드리지 않고 수정 가능
  * 트래픽 감소
    * 클라이언트가 SQL문 작성하지 않고, 매개변수만 전달하면
    * SQL문은 이미 서버에 저장되어 있기 때문에, 서버-클라이언트 간 트래픽 감소
  * 보안
    * 프로시저에서 현재 참조 중인 테이블의 접근 막기 가능

* 단점

  * 구문 규칙이 SQL, 오라클이 달라서 => 호환성 문제 있음
  * 성능
    * 문자/숫자 연산 시, 프로그래밍 언어인 C, Java보다 느림
  
* 프로시저 생성 & 호출 (문법 공부하기)

  ```sql
  -- 생성
  CREATE OR REPLACE PROCEDURE 프로시저명(매개변수명1 IN 자료형, 매개변수명2 IN VARCHAR2, 리턴변수명 OUT 자료형)
  IS
  [
      지역변수명1 자료형;
      지역변수명2 자료형 := '값 대입';
      ...
  ]
  BEGIN
  	필요한 기능
  END;
  
  
  -- 호출
  DECLARE name VARCHAR2(100)
  EXEC 프로시저명
  ```

  