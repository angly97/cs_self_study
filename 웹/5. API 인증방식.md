# 5.  API 인증방식



### 1. API Key

* 특정 사용자가 해당 API를 사용하기 위해 알고있는 문자열
* 이 키를 통해 누가 API를 호출하였는지 인증 가능
* 동작 방식
  1. 사용자는 API Key 발급받음
  2. 해당 API를 사용하기 위해 Key와 함께 요청을 uri로 보냄
  3. 애플리케이션은 Key를 통해, User 정보와 권한 확인하고, 데이터를 사용자에게 반환
* 단점/문제점
  * API Key가 노출되면, 통신 구간이 암호화되어도 데이터 유출 가능 => 주기적으로 Key 갱신 필요



### 2. OAuth 2.0

* API Key 단점을 보완
* 과정
  1. 자원 소유자가 Client에서, 해당 자원 접근하려고 요청 (ex. 네이버로 로그인)
  2. Client는 => **권한 부여 승인코드를 요청** => 권한 서버에게 **in HTTPS 요청**
     * 요청에 포함되는 파라미터
       * **Client_id**, Redirect_url, 응답 형식
  3. Client는 자원소유자의 브라우저를 => **권한 서버의 화면으로 리다이렉트**
  4. 자원소유자가 계정 정보 입력하여 **Client에 권한 Grant**
  5.  **권한 서버는 => 인가코드를 => Client에게** 줌
  6. Client는 인가코드를 보내며 **Access Token을 => 권한 서버에게** 요청
     * 요청에 포함되는 파라미터
       * Client_id, Client_Secret, Redirect_url, **인가 코드**
  8. 토큰을 받고, 클라이언트는 유저를 대신하여, **엑세스 토큰과 함께 요청을  => 자원 서버에게** 보냄
* 단점/문제점
  * API Key방식보다 복잡
  * 엑세스 토큰이 무의미한 문자열이라서 => 토큰 검증하기 위해 DB에 접근하는 과정 필요



### 3. JWT (JSON Web Token)

* Token 작성에 대한 규약
* 토큰 자체가 인증 정보를 담고있음
  * Access Token이 무의미한 문자열이어서 검증을 매번 해야하는 단점 보완
  * 따라서 매번 인증서버 검증 필요 없음
* 단점/문제점
  * 토큰 자체에 정보가 담겨있기 때문에, 민감한 정보는 인증서버에 접속 필요