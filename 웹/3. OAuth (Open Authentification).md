# 3. OAuth (Open Authentification)



### 1. OAuth

* 다른 서비스를 통해 해당 API 사용 권한을 인증받는 공통 수단
* 타사의 계정에 대한 정보를 공유하도록 허용해줌
* 흔히, 카카오 로그인/네이버 로그인/ 구글 로그인 기능에서 쓰이는 인증 절차가 OAuth
* 배경
  * 개인정보를 여러 서비스에 입력하면 피싱에 노출될 수 있음
  * 따라서 ID/PW 제공하지 않고 서비스 이용하기 위함
* 장점
  * 사용자는 소비자에 ID/PW 알려주지 않아도 됨
  * 소비자는 사용자의 ID/PW 정보 몰라도, 엑세스토큰만 가지고 허가 받은 API에 접근 가능
* 단점
  * 전자 서명으로 암호화하여 번거로움
  * 인증 토큰을 발급받으면 계속 사용 가능하기 때문에 긴 시간 사용할 경우 공격에 취약
* OAuth 2.0
  * 인증 절차 간소화 
    * 기능 단순화 & 확장성을 위해
    * API 호출 시, 클라이언트 인증을 위한 디지털 서명 기반 암호화를 => HTTPS를 의무화하여 암호화 맡김
  * 다양한 인증 방식 제공
  * Refresh Token으로 엑세스 토큰 갱신 가능
    * 접근 토큰 재발급하기 위한 재발급 토큰
    * 접근 토큰의 유효기간 단축하여 보안 개선
  * 용어 변경



### 2. 용어(1.0/2.0)

* 사용자/자원 소유자 (User/Resource Owner)
  * 계정을 가진 개인
* 서비스 제공자/자원 서버 (Service Provider/ResourceServer)
  * OAuth를 통해 접근을 지원하는 웹 애플리케이션
  * 카카오, 네이버, 구글 등
* 소비자/클라이언트(Consumer/Client)
  * OAuth를 통해 서비스 제공자에게 접근하는 웹 사이트 or 애플리케이션
* 접근 토큰 (Access Token)
  * 소비자가 사용자를 대신하여 보호된 리소스에 접근하는데 사용되는 값



### 3. 인증 과정

1. 유저 브라우저에서 '카카오계정으로 로그인' 버튼을 누른 후, 계정 정보 입력
2. 자원 서버/서비스 제공자는 유효한 아이디일 경우,  인증 코드를 줌
3. 유저 브라우저는 인증 코드를 클라이언트/소비자에게 보냄
4. 클라이언트는 자원 서버에게 인증코드를 보내며, 엑세스 토큰 요청
5. 자원 서버는 클라이언트에게 엑세스 토큰 발급
6. 이 후, 유저 브라우저에서 사용자 정보에 접근하려는 요청을 하면
   =>  클라이언트는 유저를 대신하여, 엑세스 토큰과 함께 요청을  => 자원 서버에게 보냄